#!/usr/bin/env python
from __future__ import print_function
from setuptools import setup, find_packages
from Cython.Build import cythonize
import numpy as np #needed for numpy include paths

# setup moab include paths
moab_root = '${CMAKE_SOURCE_DIR}'
moab_source_include = moab_root + '/src/moab/'
moab_other_source_include = moab_root + '/src/'
moab_binary_include = '${CMAKE_BINARY_DIR}/src/'
moab_lib_path = '${CMAKE_BINARY_DIR}/lib/'

include_paths = [moab_source_include,
                moab_other_source_include,
                moab_binary_include,
                np.get_include()]
# cythonize and gather modules
ext_modules = cythonize('pymoab/*.pyx', language='c++')

# set values for each module
for ext in ext_modules:
    ext.include_dirs = include_paths
    ext.library_dirs = [moab_lib_path,]
    ext.libraries = ["MOAB",]

# setup pymoab
setup(
    name="pymoab",
    ext_modules=ext_modules,
    packages=find_packages(),
    package_data = {'pymoab': ['*.pxd',]}
)
