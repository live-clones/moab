language: c

env:
  - CC="clang" CXX="clang++" CONFIGOPTS="--enable-debug --disable-optimize"
  - CC="gcc" CXX="g++" CONFIGOPTS="--disable-debug --enable-optimize --enable-tools"

branches:
  only:
    - master
    - develop
    - pr-*
    - Version*
    - vijaysm*
    - iulian*

build:

  pre_ci:

  pre_ci_boot:
    image_name: vijaysm/scientific
    image_tag: latest
    pull: true
    options:
  ci:
    - autoreconf -fi
    - ./configure --enable-shared --enable-pymoab --disable-fortran PYTHON=python3 $CONFIGOPTS
    - make all check
  post_ci:
    - make dist distclean
  on_success:
    - echo "Excellent. PyMOAB works cleanly!"
  on_failure:
    - echo "Alas. PyMOAB failed."
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/.git
  push:

